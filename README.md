# Backend Authentication & Authorization System

## Описание

Backend-проект, реализующий собственную систему аутентификации и авторизации без использования стандартных механизмов Django.

## Стек

- Python
- Django
- Django REST Framework
- JWT
- bcrypt

## Запуск

pip install -r requirements.txt
python manage.py migrate
python manage.py runserver

## Система авторизации

В проекте реализована **собственная система авторизации**, основанная на ролях и явных правилах доступа.  
Система не использует встроенные механизмы прав доступа Django и Django Rest Framework и реализована вручную.

### Роли пользователей

В системе предусмотрены следующие роли:

- **ADMIN** — полный доступ ко всем ресурсам системы и правилам авторизации
- **MANAGER** — расширенный доступ к бизнес-объектам без административных привилегий
- **USER** — доступ только к собственным объектам
- **GUEST** — неаутентифицированный пользователь, не имеющий доступа к защищённым ресурсам

### Модель управления доступом

Авторизация построена на модели **роль – ресурс – действие**.

Для каждой роли определён набор разрешений, описывающих допустимые действия над ресурсами системы.

Поддерживаемые разрешения:

- `read` — чтение собственных объектов
- `read_all` — чтение всех объектов
- `create` — создание объектов
- `update` — обновление объектов
- `delete` — удаление объектов

Правила доступа хранятся в централизованной структуре (`roles_rules`) и проверяются вручную внутри представлений (views).

### Процесс авторизации

Пароли пользователей хранятся в базе в виде хэшей, сгенерированных через библиотеку bcrypt, и никогда не сохраняются в открытом виде.
1. Пользователь идентифицируется по JWT-токену, переданному в заголовке `Authorization`.
2. Из токена извлекается идентификатор пользователя и его роль.
3. Для роли загружаются соответствующие правила доступа.
4. Если пользователь обладает необходимыми правами, доступ к ресурсу предоставляется.
5. Если пользователь не аутентифицирован, возвращается ошибка **401 Unauthorized**.
6. Если пользователь аутентифицирован, но не имеет прав, возвращается ошибка **403 Forbidden**.

### Административный API

В системе реализован административный API для управления правилами авторизации.

Пользователь с ролью **ADMIN** может:
- просматривать текущие правила доступа;
- изменять права ролей во время работы приложения.

### Авторизация бизнес-объектов

Правила авторизации применяются к mock-бизнес-объектам (например, «Заказы»):

- **ADMIN** и **MANAGER** имеют доступ ко всем объектам;
- **USER** имеет доступ только к объектам, владельцем которых он является;
- **GUEST** не имеет доступа к защищённым ресурсам.
